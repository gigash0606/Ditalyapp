<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WaiterPad</title>
    <style>
        :root { --primary: #2563eb; --bg: #f1f5f9; --text: #0f172a; --danger: #dc2626; }
        
        /* Disables zoom and ensures fast taps */
        * { 
            touch-action: manipulation; 
            -webkit-tap-highlight-color: transparent; 
            user-select: none; 
        }

        body { font-family: sans-serif; margin: 0; background: var(--bg); color: var(--text); }
        header { background: var(--primary); color: white; padding: 1rem; text-align: center; font-weight: bold; position: sticky; top: 0; z-index: 10; }
        .container { padding: 15px; max-width: 500px; margin: auto; }

        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        
        /* Large buttons for easy tapping */
        button { 
            padding: 20px 10px; border: none; border-radius: 12px; 
            font-size: 18px; font-weight: bold; cursor: pointer; 
            background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        }
        button:active { background: #cbd5e1; }

        .search-box { 
            width: 100%; padding: 18px; box-sizing: border-box; 
            font-size: 20px; border: 2px solid #cbd5e1; border-radius: 12px; 
            margin-bottom: 10px; background: white;
        }

        .results { background: white; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .result-item { padding: 18px; border-bottom: 1px solid #e2e8f0; font-size: 18px; }

        .order-list { background: #fff; border-radius: 12px; overflow: hidden; }
        .order-row { 
            display: flex; justify-content: space-between; align-items: center;
            padding: 18px; border-bottom: 1px solid #f1f5f9; background: white;
        }
        .order-row:active { background: #fee2e2; } /* Red tint when clicking to delete */
        
        .delete-hint { font-size: 12px; color: #94a3b8; text-align: center; margin-top: 5px; }
        .footer-btns { margin-top: 30px; display: flex; flex-direction: column; gap: 10px; }
        .clear-btn { background: var(--danger); color: white; }
    </style>
</head>
<body>

<header id="headerTitle">Select Table</header>

<div class="container">
    <div id="tableGrid" class="grid">
        <script>
            // Generate 12 tables
            for(let i=1; i<=12; i++) {
                document.write(`<button onclick="selectTable(${i})">T${i}</button>`);
            }
        </script>
    </div>

    <div id="orderInterface" style="display:none;">
        <input type="number" id="numSearch" class="search-box" placeholder="Type Item ID..." oninput="searchMenu()">
        <div id="searchResults" class="results"></div>

        <div style="display:flex; justify-content: space-between; align-items: center;">
            <h3>Order Details</h3>
            <span class="delete-hint">(Tap item to remove)</span>
        </div>
        
        <div id="activeOrder" class="order-list"></div>

        <div class="footer-btns">
            <button class="clear-btn" onclick="clearTable()">Clear Table</button>
            <button onclick="backToTables()">Back to Tables</button>
        </div>
    </div>
</div>

<script>
    // Database (IDs and Names only)
    const menu = [
        { id: 1, name: "Cola" },
        { id: 2, name: "Water" },
        { id: 3, name: "Beer" },
        { id: 4, name: "Orange Juice" },
        { id: 10, name: "Burger" },
        { id: 11, name: "Pizza" },
        { id: 12, name: "Pasta" }
    ];

    let currentTable = null;
    let allOrders = JSON.parse(localStorage.getItem('waiterData')) || {};

    function selectTable(num) {
        currentTable = num;
        document.getElementById('tableGrid').style.display = 'none';
        document.getElementById('orderInterface').style.display = 'block';
        document.getElementById('headerTitle').innerText = "Table " + num;
        renderOrder();
    }

    function backToTables() {
        document.getElementById('tableGrid').style.display = 'grid';
        document.getElementById('orderInterface').style.display = 'none';
        document.getElementById('headerTitle').innerText = "Select Table";
        document.getElementById('numSearch').value = "";
        document.getElementById('searchResults').innerHTML = "";
    }

    function searchMenu() {
        const val = document.getElementById('numSearch').value;
        const resultsDiv = document.getElementById('searchResults');
        resultsDiv.innerHTML = "";
        if (!val) return;

        const matches = menu.filter(item => item.id.toString().startsWith(val));
        matches.forEach(item => {
            const div = document.createElement('div');
            div.className = 'result-item';
            div.innerHTML = `<strong>${item.id}</strong>. ${item.name}`;
            div.onclick = () => addToOrder(item);
            resultsDiv.appendChild(div);
        });
    }

    function addToOrder(item) {
        if (!allOrders[currentTable]) allOrders[currentTable] = [];
        // Add unique timestamp to allow removing specific instances of same item
        const orderItem = { ...item, entryId: Date.now() };
        allOrders[currentTable].push(orderItem);
        saveAndRender();
        document.getElementById('numSearch').value = "";
        document.getElementById('searchResults').innerHTML = "";
    }

    function removeFromOrder(entryId) {
        allOrders[currentTable] = allOrders[currentTable].filter(i => i.entryId !== entryId);
        saveAndRender();
    }

    function saveAndRender() {
        localStorage.setItem('waiterData', JSON.stringify(allOrders));
        renderOrder();
    }

    function renderOrder() {
        const container = document.getElementById('activeOrder');
        container.innerHTML = "";
        const items = allOrders[currentTable] || [];
        
        if(items.length === 0) {
            container.innerHTML = '<div style="padding:20px; color:#94a3b8; text-align:center;">Empty</div>';
            return;
        }

        items.forEach(item => {
            const div = document.createElement('div');
            div.className = 'order-row';
            div.innerHTML = `<span>${item.name}</span> <span style="color:#ef4444; font-weight:bold;">âœ•</span>`;
            div.onclick = () => removeFromOrder(item.entryId);
            container.appendChild(div);
        });
    }

    function clearTable() {
        if(confirm("Delete everything on this table?")) {
            delete allOrders[currentTable];
            saveAndRender();
            backToTables();
        }
    }
</script>
</body>
</html>
